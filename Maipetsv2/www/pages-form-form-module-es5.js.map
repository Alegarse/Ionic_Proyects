{"version":3,"sources":["./src/app/pages/form/form.page.html","./src/app/pages/form/form-routing.module.ts","./src/app/pages/form/form.module.ts","./src/app/pages/form/form.page.scss","./src/app/pages/form/form.page.ts"],"names":[],"mappings":"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","file":"pages-form-form-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-title class=\\\"title\\\">{{ pageTitle}}</ion-title>\\n    <ion-buttons class=\\\"title\\\" slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"list\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\" class=\\\"ion-padding\\\">\\n      <ion-button>\\n        <ion-icon slot=\\\"end\\\" size=\\\"medium\\\" name=\\\"paw\\\" class=\\\"ion-padding\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\">\\n\\n  <ion-list>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Nombre</ion-label>\\n      <ion-input color=\\\"warning\\\" [(ngModel)]=\\\"mascota.nombre\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Especie</ion-label>\\n      <ion-input color=\\\"warning\\\" [(ngModel)]=\\\"mascota.especie\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Raza</ion-label>\\n      <ion-input color=\\\"warning\\\" [(ngModel)]=\\\"mascota.raza\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Color</ion-label>\\n      <ion-input color=\\\"warning\\\" [(ngModel)]=\\\"mascota.color\\\"></ion-input>\\n    </ion-item>\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Fecha de nacimiento</ion-label>\\n      <ion-input color=\\\"warning\\\" [(ngModel)]=\\\"mascota.fechaN\\\"></ion-input>\\n    </ion-item>\\n\\n    <ion-item>\\n      <ion-label position=\\\"floating\\\">Añadir Fotografía</ion-label>\\n      <br>\\n      <ion-grid>\\n        <ion-row className=\\\"ion-align-items-center\\\">\\n            <div class=\\\"fileUpload\\\">\\n              <ion-button color=\\\"primary\\\"><input type=\\\"file\\\" \\n                class=\\\"upload\\\" \\n                (change)=\\\"onUpload($event)\\\" \\n                [(ngModel)]=\\\"mascota.imageUrl\\\" />Galería</ion-button>\\n            </div>\\n        </ion-row>\\n      </ion-grid>\\n    </ion-item>\\n\\n  </ion-list>\\n  <br>\\n\\n  <ion-button\\n  *ngIf=\\\"loading == false; else btnDisabled\\\" \\n  class=\\\"text capitalize\\\" \\n  shape=\\\"round\\\" \\n  strong=\\\"true\\\"\\n  color=\\\"success\\\" \\n  (click)=\\\"addItem()\\\" \\n  expand=\\\"block\\\">{{ action }}</ion-button>\\n\\n  <ng-template #btnDisabled>\\n    <ion-button \\n  class=\\\"text capitalize\\\"\\n  disabled=\\\"true\\\" \\n  shape=\\\"round\\\" \\n  strong=\\\"true\\\"\\n  color=\\\"light\\\" \\n  (click)=\\\"addItem()\\\" \\n  expand=\\\"block\\\">{{ action }}</ion-button>\\n  </ng-template>\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { FormPage } from './form.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FormPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class FormPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FormPageRoutingModule } from './form-routing.module';\n\nimport { FormPage } from './form.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    FormPageRoutingModule\n  ],\n  declarations: [FormPage]\n})\nexport class FormPageModule {}\n","module.exports = \":host ion-content {\\n  --background: url('tileback.png');\\n}\\n\\n.fileUpload {\\n  position: relative;\\n  overflow: hidden;\\n  margin: 10px;\\n}\\n\\n.fileUpload input.upload {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  margin: 0;\\n  padding: 0;\\n  font-size: 20px;\\n  cursor: pointer;\\n  opacity: 0;\\n  filter: alpha(opacity=0);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvZm9ybS9EOlxcRlBJREFNXFwyREFNXFxBRFxcUHJveWVjdG9zIElvbmljXFxNYWlwZXRzdjIvc3JjXFxhcHBcXHBhZ2VzXFxmb3JtXFxmb3JtLnBhZ2Uuc2NzcyIsInNyYy9hcHAvcGFnZXMvZm9ybS9mb3JtLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNJLGlDQUFBO0FDQVI7O0FESUE7RUFDSSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtBQ0RKOztBREdBO0VBQ0ksa0JBQUE7RUFDQSxNQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxVQUFBO0VBQ0EsZUFBQTtFQUNBLGVBQUE7RUFDQSxVQUFBO0VBQ0Esd0JBQUE7QUNBSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2Zvcm0vZm9ybS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XHJcbiAgICBpb24tY29udGVudCB7XHJcbiAgICAgICAgLS1iYWNrZ3JvdW5kOiB1cmwoJy4uLy4uLy4uL2Fzc2V0cy9pbWdzL3RpbGViYWNrLnBuZycpO1xyXG4gICAgfVxyXG59XHJcblxyXG4uZmlsZVVwbG9hZCB7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgbWFyZ2luOiAxMHB4O1xyXG59XHJcbi5maWxlVXBsb2FkIGlucHV0LnVwbG9hZCB7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDA7XHJcbiAgICByaWdodDogMDtcclxuICAgIG1hcmdpbjogMDtcclxuICAgIHBhZGRpbmc6IDA7XHJcbiAgICBmb250LXNpemU6IDIwcHg7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICBvcGFjaXR5OiAwO1xyXG4gICAgZmlsdGVyOiBhbHBoYShvcGFjaXR5PTApO1xyXG59IiwiOmhvc3QgaW9uLWNvbnRlbnQge1xuICAtLWJhY2tncm91bmQ6IHVybChcIi4uLy4uLy4uL2Fzc2V0cy9pbWdzL3RpbGViYWNrLnBuZ1wiKTtcbn1cblxuLmZpbGVVcGxvYWQge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIG1hcmdpbjogMTBweDtcbn1cblxuLmZpbGVVcGxvYWQgaW5wdXQudXBsb2FkIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBvcGFjaXR5OiAwO1xuICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MCk7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { Mascota } from 'src/app/model/mascota';\nimport { ItemService } from 'src/app/services/item.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { Observable } from 'rxjs';\nimport { AngularFirestore } from '@angular/fire/firestore';\n\n@Component({\n  selector: 'app-form',\n  templateUrl: './form.page.html',\n  styleUrls: ['./form.page.scss'],\n})\nexport class FormPage implements OnInit {\n\n  pageTitle: string = \"Nueva mascota\"\n  action: string = \"Guardar\"\n  id: string;\n  loading: boolean;\n\n  mascota: Mascota = {\n    nombre: '',\n    especie: '',\n    raza: '',\n    color: '',\n    fechaN: '',\n    imageUrl: ''\n  }\n\n constructor(\n    private itemService: ItemService,\n    private router: Router,\n    private activatedRoute: ActivatedRoute,\n    private afs: AngularFirestore,\n    private storage: AngularFireStorage,\n  ) { }\n\n\n  ngOnInit() {\n    this.id = this.activatedRoute.snapshot.paramMap.get('id');\n    if (this.id != null) {\n      this.itemService.getItemById(this.id).subscribe(\n        data => {\n          this.mascota = data;\n          this.pageTitle = \"Editar mascota\";\n          this.action = \"Actualizar mascota\"\n        }\n      )\n    }\n  }\n\n  addItem() {\n    if (this.action == \"Guardar\") {\n      this.itemService.addItem(this.mascota);\n    } else {\n      this.itemService.updateItemById(this.id, this.mascota)\n    }\n    this.router.navigateByUrl('/list')\n  }  \n\n  \n  onUpload(event) {\n\n    this.loading = true;\n    if (event.target.files && event.target.files[0]) {\n      var reader = new FileReader();\n\n      reader.readAsDataURL(event.target.files[0]);\n      \n      reader.onload = (e:any) => {\n\n        // Para subir la imagen a Firebase\n        const fileraw = event.target.files[0];\n        console.log(fileraw);\n        const idf = Math.random().toString(36).substring(2);\n        const filePath = `uploads/file_${idf}`;\n        const result = this.SaveImageRef(filePath, fileraw);\n        const ref = result.ref;\n\n        result.task.then(a => {\n          ref.getDownloadURL().subscribe(a => {\n            console.log(a);\n            this.loading = false;\n            // Asocio la url a laimagen de la mascota\n            this.mascota.imageUrl = a;\n          });\n        });\n      }, error => {\n        alert(\"Error en la subida\");\n      }\n    }\n  }\n\n  SaveImageRef(filePath, file) {\n    return {\n      task: this.storage.upload(filePath, file)\n      , ref: this.storage.ref(filePath)\n    };\n  } \n}"],"sourceRoot":""}